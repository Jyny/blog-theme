{{ define "main" }}

{{ $isntDefault := not (or (eq (trim $.Site.Params.contentTypeName " ") "posts") (eq (trim $.Site.Params.contentTypeName " ") "")) }}
{{ $contentTypeName := cond $isntDefault (string $.Site.Params.contentTypeName) "posts" }}

<div class="archive">
  <h1>{{ .Title }}</h1>
  {{ range (where .Site.RegularPages "Type" "post").GroupByPublishDate "2006" }}
    <div class="archive-group">
      <div class="post-year">{{ .Key }}</div>
      <ul class="archive-list">
        {{- range .Pages }}
          <li class="post-item">
            <a href="{{.Permalink}}">
              <span class="post-title">{{.Title}}</span>
              <span class="post-day">{{ if .Site.Params.dateformShort }}{{ .Date.Format .Site.Params.dateformShort }}{{ else }}{{ .Date.Format "Jan 2"}}{{ end }}</span>
            </a>
          </li>
        {{- end }}
      </ul>
    </div>
  {{ end }}
</div>
{{ end }}
